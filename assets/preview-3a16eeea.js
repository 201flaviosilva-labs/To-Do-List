import{a as b}from"./jsx-runtime-9a982444.js";import{H as v}from"./index-a3016ef2.js";import{e as w,R as C,f as E}from"./index-9e094019.js";import{t as L}from"./tasks-61d70c5a.js";import{u as R}from"./users-bde70613.js";import{r as l}from"./index-928ed2fb.js";import"./hoist-non-react-statics.cjs-ded9213f.js";import"./index-94b92cae.js";import"./index-462ba2bf.js";import"./_commonjsHelpers-725317a4.js";import"./enums-9689c747.js";function N(){const r=w();let i=null,s=null;return{clear(){i=null,s=null},notify(){r(()=>{let t=i;for(;t;)t.callback(),t=t.next})},get(){let t=[],n=i;for(;n;)t.push(n),n=n.next;return t},subscribe(t){let n=!0,e=s={callback:t,next:null,prev:s};return e.prev?e.prev.next=e:i=e,function(){!n||i===null||(n=!1,e.next?e.next.prev=e.prev:s=e.prev,e.prev?e.prev.next=e.next:i=e.next)}}}}const S={notify(){},get:()=>[]};function U(r,i){let s,t=S,n=0,e=!1;function u(g){d();const h=t.subscribe(g);let m=!1;return()=>{m||(m=!0,h(),p())}}function f(){t.notify()}function c(){a.onStateChange&&a.onStateChange()}function o(){return e}function d(){n++,s||(s=i?i.addNestedSub(c):r.subscribe(c),t=N())}function p(){n--,s&&n===0&&(s(),s=void 0,t.clear(),t=S)}function y(){e||(e=!0,d())}function x(){e&&(e=!1,p())}const a={addNestedSub:u,notifyNestedSubs:f,handleChangeWrapper:c,isSubscribed:o,trySubscribe:y,tryUnsubscribe:x,getListeners:()=>t};return a}const M=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",k=M?l.useLayoutEffect:l.useEffect;function A({store:r,context:i,children:s,serverState:t,stabilityCheck:n="once",noopCheck:e="once"}){const u=l.useMemo(()=>{const o=U(r);return{store:r,subscription:o,getServerState:t?()=>t:void 0,stabilityCheck:n,noopCheck:e}},[r,t,n,e]),f=l.useMemo(()=>r.getState(),[r]);k(()=>{const{subscription:o}=u;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),f!==r.getState()&&o.notifyNestedSubs(),()=>{o.tryUnsubscribe(),o.onStateChange=void 0}},[u,f]);const c=i||C;return l.createElement(c.Provider,{value:u},s)}const D=E({reducer:{users:R,tasks:L}}),q={parameters:{actions:{argTypesRegex:"^on[A-Z].*"},controls:{matchers:{color:/(background|color)$/i,date:/Date$/}}},decorators:[r=>b(v,{children:b(A,{store:D,children:b(r,{})})})]};export{q as default};
