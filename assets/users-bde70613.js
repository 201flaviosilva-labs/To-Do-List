import{c as l,a as n,g as c}from"./index-9e094019.js";import{D as t,L as s}from"./enums-9689c747.js";const U=[{id:t.GUEST,username:"Guest",password:""},{id:t.ADMIN,username:"Admin",password:"123"}],S={users:localStorage.getItem(s.USERS)?JSON.parse(localStorage.getItem(s.USERS)):U,currentUserId:localStorage.getItem(s.CURRENT_USER)?JSON.parse(localStorage.getItem(s.CURRENT_USER)):t.GUEST,status:null};localStorage.setItem(s.USERS,JSON.stringify(S.users));localStorage.setItem(s.CURRENT_USER,JSON.stringify(S.currentUserId));const u=l({name:"users",initialState:S,reducers:{createUser(e,a){if(!e.users.find(r=>r.username===a.payload.username))return e.users.push({...a.payload,id:c()}),localStorage.setItem(s.USERS,JSON.stringify(e.users)),e.status="201",e;e.status="409"},login(e,a){const r=e.users.find(o=>o.username===a.payload.username);if(r&&r.username===a.payload.username&&r.password===a.payload.password)return e.currentUserId=r.id,localStorage.setItem(s.CURRENT_USER,JSON.stringify(r.id)),e.status="200",e;e.status="401"},logOut(e){e.currentUserId=t.GUEST,localStorage.setItem(s.CURRENT_USER,JSON.stringify(t.GUEST))},clearStatus(e){e.status=null}}}),g=n(e=>e.users.users,()=>JSON.parse(localStorage.getItem(s.CURRENT_USER)),(e,a)=>e.find(r=>r.id===a)),{createUser:R,login:E,logOut:m,clearStatus:I}=u.actions,p=u.reducer;export{E as a,R as b,I as c,g,m as l,p as u};
